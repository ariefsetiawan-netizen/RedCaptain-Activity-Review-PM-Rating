<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Review Activity & Rate Your PM — RedDoorz Plus near Mall Ciputra Jakarta (03 Oct 2025, 09:00 WIB)</title>
  <style>
    :root{
      --brand:#ec2224; /* RedDoorz */
      --ink:#303030;
      --muted:#666;
      --bg:#e9e9e9;
      --card:#ffffff;
      --line:#eee;
      --chip:#fafafa;
      --ok:#19a45b;
    }
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0; font-family: Arial, Helvetica, sans-serif; background:var(--bg); color:var(--ink);
    }
    .wrap{ max-width: 920px; margin: 0 auto; }
    .appbar{
      background:#fff; border-bottom:1px solid var(--line); position:sticky; top:0; z-index:10;
    }
    .barinner{ display:flex; gap:12px; align-items:center; padding:10px 16px; }
    .logo{ width:24px; height:24px; border-radius:4px; background:var(--brand); box-shadow:0 0 0 2px rgba(0,0,0,.06) inset; }
    .subject{ font-weight:700; font-size:14px; line-height:1.2; }
    .meta{ font-size:12px; color:var(--muted); display:flex; flex-wrap:wrap; gap:8px; }
    .chip{ background:var(--chip); border:1px solid #ddd; padding:2px 8px; border-radius:999px; }

    .stage{ background:#f5f5f5; border-top:3px solid var(--brand); border-radius:0 0 8px 8px; box-shadow:0 1px 0 rgba(0,0,0,.03) inset; }
    .stage-inner{ padding:16px; }
    .titlebox{ text-align:center; color:var(--ink); }
    .titlebox h2{ margin:12px 0 6px; font-weight:700; font-size:20px; }
    .titlebox .sub{ color:var(--muted); font-size:13px; }

    .card{ background:var(--card); border:1px solid #f5f5f5; border-radius:10px; overflow:hidden; box-shadow:0 1px 2px rgba(0,0,0,.03);
           margin:16px 0; }
    .card .head{ padding:14px 16px; border-bottom:1px solid var(--line); font-weight:bold; color:var(--ink); text-align:center; }

    table.meta_tbl{ width:100%; border-collapse:collapse; font-size:13px; }
    table.meta_tbl td{ padding:10px 16px; vertical-align:top; }
    table.meta_tbl tr:nth-child(even){ background:#fafafa; }
    table.meta_tbl .k{ color:var(--muted); width:42%; }

    .listreset{ margin:0; padding:0; list-style:none; line-height:1.7; }

    .rating-row{ display:flex; justify-content:center; gap:12px; flex-wrap:wrap; padding:16px; }
    .starbtn{ display:inline-flex; flex-direction:column; align-items:center; gap:6px; text-decoration:none; color:var(--ink); }
    .starbtn .btn{ display:inline-block; min-width:56px; text-align:center; padding:10px 12px; border:1px solid #ddd; border-radius:8px; background:#fafafa; font-size:14px; }
    .starbtn small{ font-size:12px; color:var(--muted); }
    .starbtn.active .btn{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(236,34,36,.15); }

    .helper{ text-align:center; color:#777; font-size:12px; padding:0 12px 16px; }

    .simbar{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 16px; background:#fff; border:1px dashed #ddd; border-radius:8px; margin:16px 0; }
    .simbar code{ background:#f7f7f7; border:1px solid #eee; padding:4px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; }
    .simbar label{ display:flex; align-items:center; gap:8px; font-size:12px; color:#444; }
    .pill{ display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid #ddd; border-radius:999px; background:#fff; }
    .pill input[type="text"]{ border:none; outline:none; font-size:12px; width:18ch; }
    .pill .copy{ cursor:pointer; border:1px solid #ddd; padding:4px 8px; border-radius:999px; background:#fafafa; }

    .footer-lite{ background:#f5f5f5; border-top:1px solid var(--line); padding:14px 16px; color:var(--muted); font-size:12px; }
    .footer-dark{ background:#303030; color:#fff; text-align:center; padding:12px 8px; font-size:12px; border-radius:0 0 8px 8px; }

    @media (max-width: 560px){
      .barinner{ flex-direction:column; align-items:flex-start; }
      .subject{ font-size:13px; }
      table.meta_tbl td{ display:block; width:100%; }
      table.meta_tbl .k{ width:auto; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Top bar simulating the email envelope fields -->
    <div class="appbar">
      <div class="barinner">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="subject">Subject: Review Activity &amp; Rate Your PM — RedDoorz Plus near Mall Ciputra Jakarta (03 Oct 2025, 09:00 WIB)</div>
          <div class="meta">
            <span class="chip">From: redcaptain-info@reddoorz.com</span>
            <span class="chip">To: owner@gmail.com</span>
            <span class="chip">MIME: text/html; charset=UTF-8</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Email body turned Landing Page -->
    <div class="stage">
      <div class="stage-inner">
        <!-- Title -->
        <div class="titlebox">
          <h2>Activity Review &amp; Property Manager Rating</h2>
          <div class="sub">Thank you for trusting RedDoorz. Please review this activity and rate your Property Manager.</div>
        </div>

        <!-- Activity Summary Card -->
        <div class="card">
          <div class="head">Activity Summary</div>
          <table class="meta_tbl" role="table">
            <tr>
              <td class="k">Property</td>
              <td><b>RedDoorz Plus near Mall Ciputra Jakarta</b></td>
            </tr>
            <tr>
              <td class="k">Activity At</td>
              <td><b>03 Oct 2025, 09:00 WIB</b></td>
            </tr>
            <tr>
              <td class="k">Activity Type</td>
              <td>Property Visit</td>
            </tr>
            <tr>
              <td class="k">Mode of Meeting</td>
              <td>Offline Meeting</td>
            </tr>
            <tr>
              <td class="k">Subject</td>
              <td>Property &amp; Room Facility Check</td>
            </tr>
            <tr>
              <td class="k">Stakeholders Met</td>
              <td>
                <ul class="listreset">
                  <li><b>PIC</b> — Budi Santoso <span style="color:var(--muted)">· +62 811-2233-445</span></li>
                  <li><b>Front Office Supervisor</b> — Sari Putri <span style="color:var(--muted)">· +62 812-8888-9090</span></li>
                  <li><b>Engineering</b> — Andi Saputra <span style="color:var(--muted)">· +62 813-7000-1212</span></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td class="k">Notes</td>
              <td>
                Inspected lobby, corridors, and five sample rooms. Minor paint touch-up needed on 3rd floor;
                emergency exit light on level 2 not functioning; two extinguishers due for refill. Housekeeping
                SOP reviewed and acknowledged. Next action: complete maintenance fixes by 10 Oct and share
                confirmation photos.
              </td>
            </tr>
            <tr>
              <td class="k">Attachments</td>
              <td>
                <a href="#" data-demo-link="https://files.reddoorz.com/demo/ACT-2025-10-03-0123/visit_report.pdf" style="color:var(--brand); text-decoration:none">View Activity Proof</a>
              </td>
            </tr>
          </table>
        </div>

        <!-- Rating Card -->
        <div class="card" id="rating-card">
          <div class="head">Rate Your PM (Arief Setiawan - 6282299997777)</div>

          <!-- Simulation controls -->
          <div class="simbar">
            <label>
              <input type="checkbox" id="toggle-redirect" />
              Enable real redirect to rdz.li when selecting a star
            </label>
            <div class="pill">
              <span>activity_id</span>
              <input id="activityId" type="text" value="ACT-2025-10-03-0123"/>
              <button class="copy" data-copy="#activityId">Copy</button>
            </div>
            <div class="pill">
              <span>token</span>
              <input id="token" type="text" value="demo-token-123"/>
              <button class="copy" data-copy="#token">Copy</button>
            </div>
          </div>

          <div class="rating-row" id="rating-row" aria-label="Select a star rating">
            <!-- Buttons generated by JS for 1..5 -->
          </div>
          <div class="helper">Select a star to start rating your Property Manager.</div>
        </div>

        <!-- Footer -->
        <div class="footer-lite">
          Need help? <a href="mailto:cs@reddoorz.com" style="color:var(--brand); text-decoration:none">cs@reddoorz.com</a>
        </div>
        <div class="footer-dark">© 2025 RedDoorz</div>
      </div>
    </div>
  </div>

  <template id="star-template">
    <a class="starbtn" href="#">
      <span class="btn">★ <span class="n"></span></span>
      <small class="label"></small>
    </a>
  </template>

  <script>
    (function(){
      const labels = {1:'Poor',2:'Fair',3:'Good',4:'Very Good',5:'Excellent'};
      const row = document.getElementById('rating-row');
      const t = document.getElementById('star-template');
      const params = new URLSearchParams(location.search);

      // State (can be changed via controls)
      const state = {
        activity_id: params.get('activity_id') || document.getElementById('activityId').value,
        token: params.get('token') || document.getElementById('token').value,
        s: Number(params.get('s') || 0)
      };

      function buildUrl(star){
        const q = new URLSearchParams({
          activity_id: state.activity_id,
          token: state.token,
          s: String(star)
        });
        return `https://rdz.li/rating?${q.toString()}`;
      }

      function renderStars(){
        row.innerHTML = '';
        for(let i=1;i<=5;i++){
          const node = t.content.cloneNode(true);
          const a = node.querySelector('a');
          const n = node.querySelector('.n');
          const lab = node.querySelector('.label');
          n.textContent = i;
          lab.textContent = labels[i];
          a.href = buildUrl(i);
          a.dataset.star = String(i);
          if(state.s === i) a.classList.add('active');
          a.addEventListener('click', function(ev){
            const real = document.getElementById('toggle-redirect').checked;
            if(!real){
              ev.preventDefault();
              state.s = i;
              // Highlight selection
              document.querySelectorAll('.starbtn').forEach(x=>x.classList.remove('active'));
              a.classList.add('active');
              // Show simulated toast
              const url = buildUrl(i);
              showToast(`Simulated redirect to: ${url}`);
            }
          });
          row.appendChild(node);
        }
      }

      function showToast(msg){
        let el = document.getElementById('toast');
        if(!el){
          el = document.createElement('div');
          el.id = 'toast';
          el.style.position='fixed';
          el.style.left='50%';
          el.style.bottom='24px';
          el.style.transform='translateX(-50%)';
          el.style.background='#111';
          el.style.color='#fff';
          el.style.padding='10px 14px';
          el.style.borderRadius='10px';
          el.style.boxShadow='0 6px 16px rgba(0,0,0,.25)';
          el.style.fontSize='12px';
          el.style.zIndex='999';
          document.body.appendChild(el);
        }
        el.textContent = msg;
        el.style.opacity = '1';
        clearTimeout(el._t);
        el._t = setTimeout(()=>{ el.style.transition='opacity .3s'; el.style.opacity='0'; }, 1800);
      }

      // Copy helpers
      document.querySelectorAll('.copy').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const sel = btn.getAttribute('data-copy');
          const input = document.querySelector(sel);
          input.select();
          input.setSelectionRange(0, 99999);
          document.execCommand('copy');
          showToast('Copied: ' + input.value);
        });
      });

      // Keep state in sync when typing
      document.getElementById('activityId').addEventListener('input', (e)=>{ state.activity_id = e.target.value; renderStars(); });
      document.getElementById('token').addEventListener('input', (e)=>{ state.token = e.target.value; renderStars(); });

      // Attachment demo link: open target but show toast first
      const attach = document.querySelector('[data-demo-link]');
      attach.addEventListener('click', (e)=>{
        e.preventDefault();
        const url = attach.getAttribute('data-demo-link');
        showToast('Opening attachment: ' + url);
        setTimeout(()=>{ window.open(url, '_blank'); }, 350);
      });

      // Prefill highlight from ?s= query
      if(state.s){
        // Delay to ensure elements exist
        setTimeout(()=>{
          const btn = row.querySelector(`.starbtn[data-star="${state.s}"]`);
          if(btn) btn.classList.add('active');
        }, 0);
      }

      renderStars();
    })();
  </script>
</body>
</html>
